@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  body {
    @apply bg-slate-900 text-white select-none overflow-hidden touch-none; /* Prevent scrolling and selection for app-feel */
    overscroll-behavior: none;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }
}

/* ===========================================
   Safe Area Utilities for Dynamic Island
   =========================================== */

/*
 * Composite utility for full-screen content:
 * - Uses max() to ensure at least base padding (1.5rem) even without safe area
 * - Portrait: top padding for Dynamic Island
 * - Landscape: left/right padding based on device orientation
 */
.safe-screen {
  padding-top: env(safe-area-inset-top);
  padding-left: max(env(safe-area-inset-left), 1.5rem);
  padding-right: max(env(safe-area-inset-right), 1.5rem);
}

/*
 * Composite utility for overlays/modals:
 * - Uses max() to ensure at least base padding even without safe area
 */
.safe-overlay {
  padding-top: env(safe-area-inset-top);
  padding-left: max(env(safe-area-inset-left), 1.5rem);
  padding-right: max(env(safe-area-inset-right), 1.5rem);
}

/*
 * Portrait-only top spacer (for progress bars that should be flush in landscape)
 */
@media (orientation: portrait) {
  .safe-top-spacer {
    padding-top: env(safe-area-inset-top);
  }
}

/*
 * Landscape-only side padding (for content areas in landscape split view)
 * Uses max() to ensure minimum padding of 1rem
 */
@media (orientation: landscape) {
  .safe-landscape-left {
    padding-left: max(env(safe-area-inset-left), 1rem);
  }
  .safe-landscape-right {
    padding-right: max(env(safe-area-inset-right), 1rem);
  }
}

/*
 * Margin variants for absolutely positioned elements
 */
@media (orientation: portrait) {
  .safe-margin-top {
    margin-top: env(safe-area-inset-top);
  }
}
@media (orientation: landscape) {
  .safe-margin-left {
    margin-left: env(safe-area-inset-left);
  }
  .safe-margin-right {
    margin-right: env(safe-area-inset-right);
  }
}

/* Custom animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeInRight {
  from { opacity: 0; transform: translateX(20px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes popIn {
  0% { opacity: 0; transform: scale(0.5); }
  70% { transform: scale(1.1); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes bounceSubtle {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-out forwards;
}

.animate-fade-in-right {
  animation: fadeInRight 0.4s ease-out forwards;
}

.animate-fade-in-up {
  animation: fadeInUp 0.4s ease-out forwards;
}

.animate-pop-in {
  animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

.animate-bounce-subtle {
  animation: bounceSubtle 2s infinite ease-in-out;
}

/* Mask gradients for fade effects */
.mask-fade-bottom {
  mask: linear-gradient(to bottom, black calc(100% - 2rem), transparent 100%);
  -webkit-mask: linear-gradient(
    to bottom,
    black calc(100% - 2rem),
    transparent 100%
  );
}

.mask-fade-y {
  mask: linear-gradient(
    to bottom,
    transparent 0%,
    black 1rem,
    black calc(100% - 1rem),
    transparent 100%
  );
  -webkit-mask: linear-gradient(
    to bottom,
    transparent 0%,
    black 1rem,
    black calc(100% - 1rem),
    transparent 100%
  );
}
